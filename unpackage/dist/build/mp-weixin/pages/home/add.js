(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/add"],{2705:function(e,t,n){"use strict";(function(e){n("96ad");o(n("66fd"));var t=o(n("55e0"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"38da":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("89c9"));function i(e){return e&&e.__esModule?e:{default:e}}var c=function(){n.e("components/axb-checkbox/axb-checkbox").then(function(){return resolve(n("af89"))}.bind(null,n)).catch(n.oe)},s=function(){Promise.all([n.e("common/vendor"),n.e("components/chose-city/chose-city")]).then(function(){return resolve(n("e3e5"))}.bind(null,n)).catch(n.oe)},a={components:{axbCheckBox:c,choseCity:s},data:function(){return{showCity:!1,typeList:[{name:"猫咪",value:"1",checked:0},{name:"狗狗",value:"2",checked:0}],sexList:[{name:"男孩",value:"1",checked:0},{name:"女孩",value:"2",checked:0}],bodyList:[{name:"已免疫",value:"已免疫",checked:0},{name:"已驱虫",value:"已驱虫",checked:0},{name:"已绝育",value:"已绝育",checked:0}],ageList:[{name:"0-3月",value:"0-3月",checked:0},{name:"4-6月",value:"4-6月",checked:0},{name:"7-12月",value:"7-12月",checked:0},{name:"1年以上",value:"1年以上",checked:0}],conditionList:[{name:"仅限同城",value:"仅限同城",checked:0},{name:"工作稳定",value:"工作稳定",checked:0},{name:"接收回访",value:"接收回访",checked:0},{name:"签订领养协议",value:"签订领养协议",checked:0},{name:"不得遗弃、转让、贩卖、虐待",value:"不得遗弃、转让、贩卖、虐待",checked:0}],addressShow:!1,city:"选择城市",imgArr:[],petInfo:{},openId:""}},onLoad:function(t){o.default.getFlag().then((function(t){t.data&&e.switchTab({url:"/pages/home/index"})})),this.openId=t.openId;var n=e.getStorageSync("userInfo");this.petInfo.phone=n.phone},methods:{addresspick:function(e){this.city=e.city.AreaName,this.petInfo.city=e.city.AreaName},choseImg:function(){var t=this;this.serverUrl;e.chooseImage({count:8,sizeType:["original","compressed"],success:function(n){for(var i=n.tempFiles,c=0;c<i.length;c++)if(i[c].size>10458760)return void e.showToast({title:"图片过大",icon:"error"});e.showLoading({title:"上传中"}),o.default.uploadFile(n.tempFilePaths).then((function(n){t.petInfo.pictures=n,t.imgArr=n,e.hideLoading(),e.showToast({title:"上传成功",icon:"success"})}))}})},previewImg:function(t){e.previewImage({current:t,urls:this.imgArr})},deleteImg:function(e){var t=this;o.default.deletePic({picture:e}).then((function(n){if(n.success){var o=t.imgArr;t.imgArr=o.filter((function(t){return t!=e}))}else t.error()}))},chosePetType:function(e){this.petInfo.type=e},choseSex:function(e){this.petInfo.sex=e},chosePhysicalCondition:function(e){this.petInfo.physicalCondition=e},choseAge:function(e){this.petInfo.age=e},choseConditions:function(e){this.petInfo.conditions=e},submit:function(){var t=this;this.petInfo.openId=this.openId,this.paramCheck()&&o.default.addPetAdopt(this.petInfo).then((function(n){if(n.success)return e.showToast({title:"发布成功",icon:"success",duration:2e3}),void setTimeout((function(){e.switchTab({url:"/pages/home/index"})}),1500);t.error()}))},error:function(){e.showToast({title:"接口请求异常",icon:"error",duration:2e3})},selectCity:function(e){this.city=e.name,this.petInfo.city=e.name,this.showCity=!1},closeModal:function(){this.showCity=!1},paramCheck:function(){return null==this.petInfo.openId||""==this.petInfo.openId?(e.showToast({title:"您还未登录",icon:"none"}),!1):null==this.petInfo.pictures||""==this.petInfo.pictures?(e.showToast({title:"请上传图片",icon:"none"}),!1):null==this.petInfo.title||""==this.petInfo.title?(e.showToast({title:"请填写标题",icon:"none"}),!1):null==this.petInfo.nickname||""==this.petInfo.nickname?(e.showToast({title:"请填写昵称",icon:"none"}),!1):null==this.petInfo.phone||""==this.petInfo.phone?(e.showToast({title:"请填写手机号",icon:"none"}),!1):null==this.petInfo.type||""==this.petInfo.type?(e.showToast({title:"请选择种类",icon:"none"}),!1):null==this.petInfo.sex||""==this.petInfo.sex?(e.showToast({title:"请选择性别",icon:"none"}),!1):null==this.petInfo.physicalCondition||""==this.petInfo.physicalCondition?(e.showToast({title:"请选择健康状态",icon:"none"}),!1):null==this.petInfo.age||""==this.petInfo.age?(e.showToast({title:"请选择年龄",icon:"none"}),!1):null==this.petInfo.conditions||""==this.petInfo.conditions?(e.showToast({title:"请选择领养条件",icon:"none"}),!1):null==this.petInfo.city||""==this.petInfo.city?(e.showToast({title:"请选择城市",icon:"none"}),!1):null!=this.petInfo.content&&""!=this.petInfo.content||(e.showToast({title:"请留下TA的故事",icon:"none"}),!1)}}};t.default=a}).call(this,n("543d")["default"])},"3b58":function(e,t,n){"use strict";var o=n("70cc"),i=n.n(o);i.a},"533e":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o}));var o={choseCity:function(){return Promise.all([n.e("common/vendor"),n.e("components/chose-city/chose-city")]).then(n.bind(null,"e3e5"))}},i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showCity=!0})},c=[]},"55e0":function(e,t,n){"use strict";n.r(t);var o=n("533e"),i=n("9966");for(var c in i)"default"!==c&&function(e){n.d(t,e,(function(){return i[e]}))}(c);n("3b58");var s,a=n("f0c5"),u=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=u.exports},"70cc":function(e,t,n){},9966:function(e,t,n){"use strict";n.r(t);var o=n("38da"),i=n.n(o);for(var c in o)"default"!==c&&function(e){n.d(t,e,(function(){return o[e]}))}(c);t["default"]=i.a}},[["2705","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/detail"],{"0c9a":function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("89c9"));function i(t){return t&&t.__esModule?t:{default:t}}var s={data:function(){return{detailObj:{},user:{},openId:"",isFollowUser:!1,isCollect:!1}},onLoad:function(o){var e=this,n=t.getStorageSync("userInfo");this.openId=n.openId,this.getAdopt(o.id),setTimeout((function(){e.isFollow(),e.isAlreadyCollect()}),500)},methods:{toHome:function(){t.switchTab({url:"/pages/home/index"})},getAdopt:function(t){var o=this,e={adoptId:t};n.default.getPetAdopt(e).then((function(t){o.detailObj=t.data.petAdoptVO,o.user=t.data.wxUserVO}))},copy:function(o){null!=o&&void 0!=o||t.showToast({title:"送养人未绑定信息",icon:"none"}),t.setClipboardData({data:o,success:function(){t.showToast({title:"复制成功"})}})},previewImage:function(o){t.previewImage({current:o,urls:this.detailObj.pictures})},toUser:function(o){t.navigateTo({url:"/pages/user/user?openId=".concat(o)})},chat:function(){if(""!=this.openId&&void 0!=this.openId){var o=this.user.openId;this.openId!=o?t.navigateTo({url:"/pages/chat/detail?toId=".concat(o)}):t.showToast({title:"无法与自己聊天哦",icon:"none"})}else t.showToast({title:"请先去登录哦",icon:"none"})},isFollow:function(){var t=this;""!=this.openId&&void 0!=this.openId&&n.default.isFollow({userId:this.openId,followId:this.user.openId}).then((function(o){t.isFollowUser=o.data}))},follow:function(){var o=this;if(""!=this.openId&&void 0!=this.openId){var e={userId:this.openId,followId:this.user.openId};n.default.addUserFollow(e).then((function(t){t.data&&(o.isFollowUser=!0)}))}else t.showToast({title:"登录后才能关注哦",icon:"none"})},unFollow:function(){var t=this,o={userId:this.openId,followId:this.user.openId};n.default.unUserFollow(o).then((function(o){o.data&&(t.isFollowUser=!1)}))},collectClick:function(){var o=this;if(""!=this.openId&&void 0!=this.openId){var e={userId:this.openId,fromId:this.detailObj.id,type:"ADOPT"};n.default.addCollect(e).then((function(e){e.success?(o.isCollect=!0,t.showToast({title:"收藏成功",icon:"none"})):t.showToast({title:e.message,icon:"error"})}))}else t.showToast({title:"登录后才能收藏哦",icon:"none"})},removeCollectClick:function(){var t=this,o={userId:this.openId,fromId:this.detailObj.id,type:"ADOPT"};n.default.removeCollect(o).then((function(o){o.success&&(t.isCollect=!1)}))},isAlreadyCollect:function(){var t=this;if(""!=this.openId&&void 0!=this.openId){var o={userId:this.openId,fromId:this.detailObj.id,type:"ADOPT"};n.default.isCollect(o).then((function(o){o.success&&(o.data?t.isCollect=!1:t.isCollect=!0)}))}},getToLocation:function(){this.viewMapLocation("120.210825","30.209049","测试地址")},viewMapLocation:function(o,e,n){e=Number(e),o=Number(o),t.getLocation({type:"wgs84",success:function(i){console.log(i,"经纬度"),"getLocation:ok"==i.errMsg&&(console.log(e),console.log(o),t.openLocation({latitude:e,longitude:o,address:n,scale:18,success:function(){console.log("success")}}))},fail:function(o){console.log(o),"getLocation:fail auth deny"==o.errMsg&&t.showModal({content:"检测到您没打开获取信息功能权限，是否去设置打开？",confirmText:"确认",cancelText:"取消",success:function(o){if(!o.confirm)return console.log("取消"),!1;t.openSetting({success:function(t){console.log("确定")}})}})}})}}};o.default=s}).call(this,e("543d")["default"])},"304a":function(t,o,e){"use strict";(function(t){e("96ad");n(e("66fd"));var o=n(e("94c2"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(o.default)}).call(this,e("543d")["createPage"])},3520:function(t,o,e){"use strict";e.r(o);var n=e("0c9a"),i=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(o,t,(function(){return n[t]}))}(s);o["default"]=i.a},"71d8":function(t,o,e){},"94c2":function(t,o,e){"use strict";e.r(o);var n=e("94fa"),i=e("3520");for(var s in i)"default"!==s&&function(t){e.d(o,t,(function(){return i[t]}))}(s);e("d107");var c,l=e("f0c5"),a=Object(l["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);o["default"]=a.exports},"94fa":function(t,o,e){"use strict";var n;e.d(o,"b",(function(){return i})),e.d(o,"c",(function(){return s})),e.d(o,"a",(function(){return n}));var i=function(){var t=this,o=t.$createElement;t._self._c},s=[]},d107:function(t,o,e){"use strict";var n=e("71d8"),i=e.n(n);i.a}},[["304a","common/runtime","common/vendor"]]]);
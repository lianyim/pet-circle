(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/find/detail"],{"33d9":function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement;t._self._c},s=[]},"4b11":function(t,e,n){"use strict";n.r(e);var o=n("33d9"),i=n("9a58");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("5128");var u,a=n("f0c5"),d=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);e["default"]=d.exports},5128:function(t,e,n){"use strict";var o=n("5600"),i=n.n(o);i.a},5600:function(t,e,n){},"9a58":function(t,e,n){"use strict";n.r(e);var o=n("cc33"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},c586:function(t,e,n){"use strict";(function(t){n("96ad");o(n("66fd"));var e=o(n("4b11"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},cc33:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("89c9"));function i(t){return t&&t.__esModule?t:{default:t}}var s={data:function(){return{detailObj:{},user:{},openId:"",isFollowUser:!1,type:"FIND",comments:[],commentsChild:[],commentContent:"",commentCount:0}},onLoad:function(e){var n=this,o=t.getStorageSync("userInfo");this.openId=o.openId,this.getPetFind(e.id),this.queryComments(e.id,this.type),this.queryCommentCount(e.id,this.type),setTimeout((function(){n.isFollow()}),500)},methods:{toHome:function(){t.switchTab({url:"/pages/home/index"})},getPetFind:function(t){var e=this,n={adoptId:t};o.default.getPetFind(n).then((function(t){e.detailObj=t.data.petFindVO,e.user=t.data.wxUserVO}))},copy:function(e){null!=e&&void 0!=e||t.showToast({title:"发布者未绑定信息",icon:"none"}),t.setClipboardData({data:e,success:function(){t.showToast({title:"复制成功"})}})},previewImage:function(e){t.previewImage({current:e,urls:this.detailObj.pictures})},toUser:function(e){console.log(e),t.navigateTo({url:"/pages/user/user?openId=".concat(e)})},chat:function(){if(""!=this.openId&&void 0!=this.openId){var e=this.user.openId;this.openId!=e?t.navigateTo({url:"/pages/chat/detail?toId=".concat(e)}):t.showToast({title:"无法与自己聊天哦",icon:"none"})}else t.showToast({title:"请先去登录哦",icon:"none"})},isFollow:function(){var t=this;""!=this.openId&&void 0!=this.openId&&o.default.isFollow({userId:this.openId,followId:this.user.openId}).then((function(e){t.isFollowUser=e.data}))},follow:function(){var e=this;if(""!=this.openId&&void 0!=this.openId){var n={userId:this.openId,followId:this.user.openId};o.default.addUserFollow(n).then((function(t){t.data&&(e.isFollowUser=!0)}))}else t.showToast({title:"登录后才能关注哦",icon:"none"})},unFollow:function(){var t=this,e={userId:this.openId,followId:this.user.openId};o.default.unUserFollow(e).then((function(e){e.data&&(t.isFollowUser=!1)}))},queryComments:function(t,e){var n=this;o.default.queryComments({fromId:t,type:e}).then((function(t){null!=t.data&&(n.commentsChild=[],n.comments=t.data,n.comments.map((function(t){null!=t.parentId&&n.commentsChild.push(t)})))}))},queryCommentCount:function(t,e){var n=this;o.default.queryCommentCount({fromId:t,type:e}).then((function(t){n.commentCount=t.data}))},submit:function(e,n){var i=this,s=t.getStorageSync("userInfo"),u=s.openId;if(void 0===u)return t.showToast({title:"您未登录，请前往登录",icon:"none",duration:1500}),void setTimeout((function(){t.switchTab({url:"/pages/user/my"})}),1500);if(""!=this.commentContent){var a={parentId:e,grandId:n,ownerId:u,formId:this.detailObj.id,content:this.commentContent,type:this.type};o.default.addComment(a).then((function(e){if(1==e.data)return t.showToast({title:"发布成功",icon:"success"}),i.queryComments(i.detailObj.id,i.type),i.queryCommentCount(i.detailObj.id,i.type),void(i.commentContent="");t.showToast({title:"接口请求异常",icon:error})}))}else t.showToast({title:"请输入评论内容",icon:"none"})},reply:function(e,n){var i=this,s=t.getStorageSync("userInfo");e.ownerId==s.openId?t.showModal({title:"确定要删除吗",success:function(n){n.confirm&&o.default.deleteComment({id:e.id}).then((function(e){if(1==e.data)return t.showToast({title:"删除成功",icon:"success"}),i.queryComments(i.detailObj.id,i.type),void i.queryCommentCount(i.detailObj.id,i.type);t.showToast({title:"接口请求异常",icon:error})}))}}):t.showModal({title:"评论",confirmText:"回复",editable:!0,placeholderText:"回复@"+e.nickname,success:function(t){t.confirm&&(i.commentContent=t.content,i.submit(e.id,null!=n?n.id:null))}})}}};e.default=s}).call(this,n("543d")["default"])}},[["c586","common/runtime","common/vendor"]]]);
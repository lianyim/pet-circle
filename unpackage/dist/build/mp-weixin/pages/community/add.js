(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/community/add"],{"0073":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("89c9"));function i(t){return t&&t.__esModule?t:{default:t}}var r={data:function(){return{imgArr:[],obj:{}}},onLoad:function(){o.default.getFlag().then((function(e){e.data&&t.switchTab({url:"/pages/home/index"})}))},methods:{choseImg:function(){var e=this;this.serverUrl;t.chooseImage({count:8,sizeType:["original","compressed"],success:function(n){for(var i=n.tempFiles,r=0;r<i.length;r++)if(i[r].size>10458760)return void t.showToast({title:"图片过大",icon:"error"});t.showLoading({title:"上传中"});o.default.uploadFile(n.tempFilePaths).then((function(n){e.imgArr=n,e.obj.pictures=n,t.hideLoading(),t.showToast({title:"上传成功",icon:"success"})}))}})},previewImg:function(e){t.previewImage({current:e,urls:this.imgArr})},deleteImg:function(t){var e=this;o.default.deletePic({picture:t}).then((function(n){if(n.success){var o=e.imgArr;return e.imgArr=o.filter((function(e){return e!=t})),void(e.obj.pictures=e.imgArr)}e.error()}))},submit:function(e){var n=this,i=t.getStorageSync("userInfo");this.obj.openId=i.openId,this.paramCheck()&&o.default.addPetCircle(this.obj).then((function(e){if(console.log(e),e.success)return t.showToast({title:"发布成功",icon:"success",duration:2e3}),void setTimeout((function(){t.switchTab({url:"/pages/community/index"})}),1500);n.error()}))},error:function(){t.showToast({title:"接口请求异常",icon:"error",duration:2e3})},paramCheck:function(){return null==this.obj.openId||""==this.obj.openId?(t.showToast({title:"您还未登录",icon:"none"}),!1):null==this.obj.content||""==this.obj.content?(t.showToast({title:"请填写您的想法",icon:"none"}),!1):null!=this.obj.pictures&&""!=this.obj.pictures||(t.showToast({title:"请选择照片",icon:"none"}),!1)}}};e.default=r}).call(this,n("543d")["default"])},"0d02":function(t,e,n){"use strict";var o=n("8279"),i=n.n(o);i.a},"5ce1":function(t,e,n){"use strict";n.r(e);var o=n("878b"),i=n("7e3d");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("0d02");var u,c=n("f0c5"),s=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);e["default"]=s.exports},"7e3d":function(t,e,n){"use strict";n.r(e);var o=n("0073"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},8279:function(t,e,n){},"878b":function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=(t._self._c,Object.keys(this.obj));t.$mp.data=Object.assign({},{$root:{g0:n}})},r=[]},"8cd2":function(t,e,n){"use strict";(function(t){n("96ad");o(n("66fd"));var e=o(n("5ce1"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])}},[["8cd2","common/runtime","common/vendor"]]]);